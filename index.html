<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTUST Renewable of Energy</title>
    <link rel="stylesheet" href="./module/reset.css">
    <link rel="stylesheet" href="./style.css">
    <!-- icon -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="./module/fontawesome.js" crossorigin="anonymous"></script>
</head>
<body>
    <div id="app">
        <router-view></router-view>
    </div>
    <template id="home_page">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">{{log_status}} </button>
                </div>
            </div>
            <div class="four_btn">
                <div class="station">
                    <div class="list">
                        <router-link to="/station_list"><button id="list_btn">案場列表</button></router-link>
                    </div>
                    <div class="monitor">
                        <router-link to="/monitor"><button id="monitor_btn">案場監控</button></router-link>
                    </div>
                </div>
                <div class="station">
                    <div class="setup">
                        <router-link to="/setup_page"><button id="setup_btn">設定</button></router-link>
                    
                    </div>
                    <div class="abnormal_management">
                        <router-link to="/abnormal_management"><button id="error_manager">異常管理</button></router-link>
                    </div>
                </div>
            </div>
        </div>
    </template>
    <template id="login_page">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div class="ntust">
                <img src="./img/台科logo-02.png" id="login_ntust">
            </div>
            <div class="log_body" v-on:keyup.enter="login_evt()">
                <label for="#username_input">帳號 :　</label>
                <div class="username">
                    <input type="text" class="login_input" id="username_input" placeholder="user@mail.com" v-model="S_Account">
                </div>
                <label for="#password_input">密碼 :　</label>
                <div class="login_password">
                    <input type="password" class="login_input" id="password_input"placeholder="Abc123" v-model="S_Password">
                </div>
            </div>
           
            <div class="log_post">
                <div class="login_btn_box">
                     <!-- @click="login_evt()" -->
                    <button id="login_btn" @click="login_evt()">登入</button>
                    <router-link to="/register" id="creat_link">建立帳戶</router-link>
                    <label class="login_status">{{user_status}}</label>
                    
                </div>
            </div>
        </div>
    </template>
    <template id="register_page">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div id="register_title">
                <h1>建立您的帳號</h1>
            </div>
            <div class="name_box">
                <input type="text" placeholder="名字" class="register_input" id="firstname" v-model="S_First_Name">
                <input type="text" placeholder="姓氏" class="register_input" id="lastname" v-model="S_Last_Name">
            </div>
            
            <div class="username_box">
                <input type="text" id="username" placeholder="帳號"class="register_input" v-model="S_Account">
            </div>
            <div class="password_box">
                <input :class='{valid:passwordValidation.valid}' id="password" :type="passwordVisible ? 'text' : 'password'" v-model="S_Password" placeholder="請輸入密碼">
                <button class="visibility" id="visibility" tabindex='-1' @click='togglePasswordVisibility' :arial-label='passwordVisible ? "Hide password" : "Show password"'>
                    <i class="material-icons">{{ passwordVisible ? "visibility" : "visibility_off" }}</i>
                </button>
                <br>
                <input :type="passwordVisible ? 'text' : 'password'" id="repassword" v-model.lazy='S_Repassword' id="repassword"placeholder="請重新輸入密碼">
                <span class="status">{{condition_err}}</span>
                <transition name="hint" appear>
                    <div v-if='passwordValidation.errors.length > 0 && !submitted' class='hints'>
                        <h2>Hints</h2>
                        <p v-for='error in passwordValidation.errors'>{{error}}</p>
                    </div>
                </transition>
                
                <div class="matches" v-if='notSamePasswords'>
                    <p>Passwords don't match.</p>
                </div>
                
            </div>
            <div v-for="t in test">
                {{t}}
            </div>
            <div class="go_on" > 
                <button id="continue_btn" @click="continue_register()" v-if='passwordsFilled && !notSamePasswords && passwordValidation.valid'>繼續</button>
            </div>
        </div>
    </template>
    <template id="user_set_page">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div id="register_title">
                <h1>帳戶資料</h1>
            </div>
            <div class="gender">
            
                <input type="radio" checked="checked" name="sex" value= 1 v-model="I_Sex">男
                <input type="radio" name="sex" value= 0 v-model="I_Sex">女
            
            </div>
            <div class="user_container">
                <div class="birthbox">
                    <input type="text" class="register_input" id="birth" v-model="D_Birthday" placeholder="生日">
                    <div class="hint">
                        <p><small>E.g. 2020/01/29</small></p>
                    </div>
                </div>
                <div class="phonebox">
                    <input type="text" id="phone" class="register_input" placeholder="連絡電話/手機"v-model="S_Phone">
                </div>
            </div>
            <div class="username_container">
                <input type="text" id="username" class="register_input" placeholder="使用者名稱" v-model="S_Username">
                <div class="hint">
                    <span id="password_hint">您可以使用英文字母、數字、半形句號</span>
                </div>
            </div>
            <div class="company">
                <input type="text" id="company_name" class="register_input" placeholder="公司名稱"v-model="S_Company_Name"><br>
                <input type="text" id="company_address" class="register_input" placeholder="公司地址" v-model="S_Company_Address">
            </div>
            <span id="userset_status">{{userset_status}}</span>
            <div class="verify">
                <input type="text" id="verify_code" class="register_input" placeholder="驗證碼" v-model="S_Verify_Code"><br>
                <!-- <a id="resent" href="">重新寄送認證碼</a> -->
            </div>   
            <div class="register_btn">
                <button id="register" @click="saveDataToServer()">註冊</button>
            </div> 
        </div>
    </template>
    <template id="profile_page">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle profile_icon"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div class="user_photo">
                <i class="fas fa-user-circle"></i>
            </div>
            <div class="user_profile" v-for="users in userInfo">
                <div class="profile_box">
                    <label for="S_Name">姓名 : <label> {{ users.Profile_Data[0].S_First_Name}} - {{ users.Profile_Data[0].S_Last_Name}}
                    
                </div>
                <div class="profile_box">
                    <label for="S_Username">使用者名稱 : </label>{{ users.Profile_Data[0].S_Username}}
                </div>
                <div class="profile_box">
                    <label for="S_Account">電子郵件 : </label>{{ users.Profile_Data[0].S_Account}}
                </div>
                <div class="profile_box">
                    <label for="S_Company_Name">公司名稱 : </label>{{ users.Profile_Data[0].S_Company_Name}}
                    
                </div>
                <div class="profile_box">
                    <label for="S_Company_Address">公司地址 : </label>{{ users.Profile_Data[0].S_Company_Address}}
                </div>
                <div class="profile_box">
                    <label for="D_Birthday">生日: </label>{{ users.Profile_Data[0].D_Birthday}}
                    
                </div>
                <div class="profile_box">
                    <label for="D_Birthday">性別: 男</label>
                </div>
                <div class="profile_box">
                    <label for="S_Password">密碼 : </label><input type="text" class="update_profile"  v-model="users.Profile_Data[0].S_Password">
                </div>
                
                <div class="profile_box">
                    <label for="S_Phone">電話 : </label> <input type="text" class="update_profile" v-model="users.Profile_Data[0].S_Phone">
                </div>
                <button id="save_profile" @click="profile_update">Save</button>
            </div>
        </div>
    </template>
    <template id="monitor_page">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <transition name="fade">
                <div class="loader" v-if="iconLoading">
                    <span></span>
                    <span></span>
                    <span></span>
                    <div class="loader__text">
                        {{loadingText}}
                    </div>
                </div>
            </transition>
            <div class="real_weather_box">
                <div class="choose_flex">
                    <div class="select_choose">
                        <select id="station" class="select_option" v-model="input.S_Station_Name">
                            <option :value="null">選擇案場</option>
                            <option :value="item" v-for="item in typeList.sort">{{item}}</option>
                        </select>
                        <select id="stationID"  class="select_option" v-model="input.S_Station_Id">
                            <option :value="null">案場編號</option>
                            <option :value="item" v-for="item in titleList.sort">{{item}}</option>
                        </select>
                         <select id="windmachine"  class="select_option" v-model="input.S_Facility_Id">
                            <option :value="null">選擇風機</option> 
                            <option :value="item" v-for="item in titleList.map">{{item}}</option>
                        </select>
                    </div>
                    <div id="single_fan_data">
                        <button class="fan_btn active"@click="real_time"id="real_btn">即時</button>
                        <button class="fan_btn"@click="error_data" id="err_btn">異常</button>
                        <button class="fan_btn" @click="recode" id="recode_btn">歷史數據</button>
                    </div>
                </div>
            </div>
            <div class="report_flex">
                <div class="select_label" >
                    <div class="select_context">
                        <label class="select_detail">案場地點</label>
                        <div class="station_name">
                            {{ input.S_Station_Name }}
                        </div>
                    </div>
                    <div class="select_context">
                        <label class="select_detail">風機編號</label>
                        <div class="station_id">
                            {{input.S_Facility_Id}}
                        </div>
                    </div>
                </div> 
                <div class="report">
                    <router-link to="/monitor/report"><button id="report_btn">報表</button></router-link><br><br>
                    <button id="excel_btn" @click="xls_event()">匯出(.csv) <i class="fas fa-file-export"></i></button>
                </div>
            </div>
            <div class="table_box" id="real_time_cont">
                <div class="havedata">
                    <table class="real_time" id="real_time">
                        <tr>
                            <th>資料時間</th>
                            <th>天氣資訊</th>
                            <th>環境溫度</th>
                            <th>DCV(V)</th>
                            <th>DCA(A)</th>
                            <th>DCP(W)</th>
                            <th>ACV(V)</th>
                            <th>ACA(A)</th>
                            <th>ACP(W)</th>
                            <th>模組風向</th>
                            <th>模組風速</th>
                            <th>模組溫度</th>
                            <th>相位</th>
                        </tr>
                        <tr v-for="item in real">
                            <td>{{ item.DT_Data_Get}}</td>
                            <td>{{ item.S_Env_Content}}</td>
                            <td>{{ item.F_Env_Temp}}</td>
                            <td>{{ item.F_ACA }} </td>
                            <td>{{ item.F_ACP }} </td>
                            <td>{{ item.F_ACV }} </td>
                            <td>{{ item.F_DCA }} </td>
                            <td>{{ item.F_DCP }} </td>
                            <td>{{ item.F_DCV }} </td>
                            <td>{{ item.F_Module_Direction }} </td>
                            <td>{{ item.F_Module_Speed }} </td>
                            <td>{{ item.F_Module_Temp }} </td>
                            <td>{{ item.F_Phase }} </td>
                        </tr>
                    </table>
                </div>
                <div class="refresh_time">
                    最後刷新時間 : {{nowDate}}{{nowWeek}}{{nowTime}}
                </div>
            </div>
            <div class="table_box" id="error_cont" style="display:none">
                <table class="abnormal" id="abnormal">
                    <tr>
                        <th>#</th>
                        <th>資料時間</th>
                        <th>警告</th>
                        <th>錯誤備註</th>
                        <th>裝置編號</th>
                        <th>閘道編號</th>
                    </tr>
                    <tr v-for="error in err">
                        <td>{{ error.I_Index }}</td>
                        <td>{{ error.DT_Error }}</td>
                        <td>{{ error.S_Error_Code }}</td>
                        <td>{{ error.S_Error_Description }}</td>
                        <td>{{ error.S_Facility_Id }}</td>
                        <td>{{ error.S_Gateway_Id }}</td>
                    
                    </tr>
                </table>
                <div class="refresh_time">
                    最後刷新時間 : {{nowDate}}{{nowWeek}}{{nowTime}}
                </div>
            </div>
            <div class="table_box" id="historical_cont" style="display:none">
                
                <table class="historical" id="historical">
                    <tr>
                        <th>#</th>
                        <th>資料時間</th>
                        <th>DCV(V)</th>
                        <th>DCA(A)</th>
                        <th>DCP(W)</th>
                        <th>ACV(V)</th>
                        <th>ACA(A)</th>
                        <th>ACP(W)</th>
                        <th>模組風向</th>
                        <th>模組風速</th>
                        <th>模組溫度</th>
                        <th>相位</th>
                        
                    </tr>
                    <tr v-for="(r, index) in filterRows.slice(pageStart, pageStart + countOfPage)">
                        <td>{{ (currPage - 1)* countOfPage + index + 1}}</td>
                        <td> {{r.DT_Data_Get}} </td>
                        <td> {{r.F_DCV}} </td>
                        <td> {{r.F_DCA}} </td>
                        <td> {{r.F_DCP}} </td>
                        <td> {{r.F_ACV}} </td>
                        <td> {{r.F_ACA}} </td>
                        <td> {{r.F_ACP}} </td>
                        <td> {{r.F_Module_Direction}} </td>
                        <td> {{r.F_Module_Speed}} </td>
                        <td> {{r.F_Module_Temp}} </td>
                        <td> {{r.F_Phase}} </td>
                            
                    </tr>
                </table>
                <nav class="pagesorted">
                    <ul>
                        <li :class="{'disable':(currPage === 1)}" @click.prevent="setPage(currPage-1)"><a href="#">Prev</a></li>
                        <li v-for="n in totalPage" :class="{'active': currPage === (n)}" @click.prevent="setPage(n)" id="pagecount"><a href="#">{{n}}</a></li>
                        <li :class="{'disable':(currPage === totalPage)}" @click.prevent="setPage(currPage+1)"><a href="#">Next</a></li>
                    </ul>
                </nav>
                <div class="refresh_time">
                    最後刷新時間 : {{nowDate}}{{nowWeek}}{{nowTime}}
                </div>
            </div>
            
        </div>
   </template>
   <template id="report_page">
       <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                        </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>  
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{user_name}} <br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div id="overview">
                <div class="overview_header">
                    <label>發電總攬</label>
                </div>
                <div class="select_choose">
                    <select id="station" class="select_option" v-model="input.S_Station_Name">
                        <option :value="null">選擇案場</option>
                        <option :value="item" v-for="item in typeList.sort">{{item}}</option>
                    </select>
                    <select id="stationID"  class="select_option" v-model="input.S_Station_Id">
                        <option :value="null">案場編號</option>
                        <option :value="item" v-for="item in titleList.sort">{{item}}</option>
                    </select>
                     <select id="windmachine"  class="select_option" v-model="input.S_Facility_Id">
                        <option :value="null">選擇風機</option> 
                        <option :value="item" v-for="item in titleList.map">{{item}}</option>
                    </select>
                </div>
                <div class="algorithm">
                    <table id="algorithm_table">
                        <tr>
                            <th>總發電量 Total kwh</th>
                            <th>PR值 PR %</th>
                            <th>達成率 Achievement %</th>
                            <th>妥善率 Proper %</th>
                            <th>最後更新時間</th>
                        </tr>
                        <tr v-for="val in power_general">
                            <td>{{ val.Report[0].F_Power_Output }}</td>
                            <td>{{ val.Report[0].F_PR }}</td>
                            <td>{{ val.Report[0].F_Achievement }}</td>
                            <td>{{ val.Report[0].F_Proper }}</td>
                            <td>{{nowDate}}{{nowWeek}}{{nowTime}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div id="report_btn_container">
                <button class="btn_segmented_control active"@click="now_report()">今日</button>
                <button class="btn_segmented_control"@click="year_report()">年</button>
                <button class="btn_segmented_control"@click="month_report()">月</button>
                <button class="btn_segmented_control"@click="Day_report()">日</button>
            </div>
            <div class="allchart">
                <div class="chart">
                    <div class="chart_container">
                        <span v-if="context"></span>
                        <canvas id="chart_power"></canvas>
                    </div>
                    <div class="chart_container">
                        <span v-if="context"></span>
                        <canvas id="chart_predict_power"></canvas>
                    </div>
                    
                </div>
                <div class="chart">
                    <div class="chart_container">
                        <canvas id="chart_pr"></canvas>
                    </div>
                    <div class="chart_container">
                        <canvas id="chart_ach"></canvas>
                    </div>
                    <div class="chart_container">
                        <canvas id="chart_proper"></canvas>
                    </div>
                </div>
            </div>
       </div>
   </template>
   <template id="station_list">
        <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                          </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div class="test"  style="color:#fbfbfb">
                <div id="station_title">
                    <h1>案場概況</h1>
                </div>
                <div id="station_list_data">
                    <div class="station_btn_sel">
                        <button id="station_data"class="station_btn" @click="station_content='station_data'">案場資訊 <i class="fas fa-arrow-circle-right"></i></button>
                        <button id="machine_apply"class="station_btn" @click="station_content='machine_apply'">設備申請 <i class="fas fa-arrow-circle-right"></i></button>
                        <router-link to="/station_apply_page"><button id="machine_detail"class="station_btn">案場申請 <i class="fas fa-arrow-circle-right"></i></button></router-link>
                    </div>
                </div>
                <div class="station_content_container">
                    <keep-alive>
                        <component :is="station_content"></component>
                    </keep-alive>
                </div>
                
            </div>
        </div>
   </template>
   <template id="station_apply_page">
       <div>
        <section class="navigation">
            <div class="banner">
                <div class="banner_icon">
                    <div class="logo_img">
                        <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                    </div>
                    <div class="logo_name">
                        <label>NTUST Renewable of Energy</label>
                    </div>
                </div>
                <input type="checkbox" id="menu_control">
                <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                <div class="nav_container">
                    <nav class="nav_header">
                        <ul class="nav-list">
                            <li>
                                <router-link to="/">首頁</router-link>
                            </li>
                        </ul>
                        <ul class="nav-list" @click="dropdown">
                            <li>
                                <a>案場列表</a>
                                <ul class="nav_dropdown">
                                    <li>
                                        <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a>設定</a>
                                <ul class="nav_dropdown">
                                    <li>
                                        <a><router-link to="/profile_page">使用者設定</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/setup_page">上下限設定</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a>管理平台</a>
                                <ul class="nav_dropdown">
                                    <li>
                                        <a><router-link to="/monitor">案場監控</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="monitor/report">報表</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        
                    
                      </nav>  
                </div>
                <div class="address_card_icon">
                    <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                </div>
            </div>
        </section>
        <div id="pop_profile" style="visibility: hidden;">
            <div class="user_icon">
                <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
            </div>
            <div class="user_data">
                Username:<br><br>{{cname}}<br>
                
            </div>
            <div class="logout">
                <button id="logoutbtn" @click="logout_evt()">Log out</button>
            </div>
        </div>
        <div id="register_title">
            <h1>新增案場</h1>
        </div>
        <div class="station_info">
            <div class="info_title">
                <label>案場場地申請</label>
            </div>
            <div class="info_content">
                <div id="info_subcontain">
                    <div class="subtitle">
                        <label>地理資訊</label>
                        <div class="caseInfo">
                            <label>案場國家:</label>
                            <div class="case_name">
                                <select-compontent  v-model="countryIdx" :options="countries"></select-compontent>
                            </div>
                            <label>地址:</label>
                            <div class="case_address">
                                <select-compontent  v-model="cityIdx" :options="cities"></select-compontent>
                                <select-compontent  v-model="areaIdx" :options="areas"></select-compontent>
                                <input type="text" v-model="S_Station_Road" placeholder="竹興二街" class="station_address">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="info_subcontain">
                    <div class="subtitle">
                        <label>能源裝置數量</label>
                        <div class="caseInfo">
                            <label>發電機數量:</label>
                            <div class="case_name">
                                <input type="number" min="0" class="station_input" placeholder="0"v-model="I_Generator_Number">
                            </div>
                            <label>閘道器數量:</label>
                            <div class="case_name">
                            <input type="number" min="0" class="station_input" placeholder="0"v-model="I_Gateway_Number">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="info_subcontain">
                    <div class="subtitle">
                        <label>案場資訊</label>
                        <div class="caseInfo">
                            <div class="id_name">
                                <label>案場名稱:</label>
                                <div class="case_name">
                                    <input type="text" class="station_input" placeholder="竹南" v-model="S_Station_Name">
                                </div>
                                <label>案場ID:</label>
                                <div class="case_name">
                                    <input type="text" class="station_input" placeholder="Z101" v-model="S_Station_Id">
                                </div>
                            </div>
                            
                            <label>能源類型:</label>
                            <div class="case_name">
                                <select id="s_gender" :value="selectVal" @change="updateVal">
                                    <option v-for="list in energies" :value="list.val">{{list.item}}</option>
                                </select>
                            </div>
                            
                        </div>
                    </div>
                    <div class="apply">
                        <button id="station_apply_btn"@click="apply_station">申請</button>
                    </div>
                    
                </div>
            </div>
          </div>
       </div>
   </template>
   <template id="facility_status">
       <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                        </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div id="register_title">
                <h1>設備狀態及更改</h1>
            </div>
            <div class="station_info">
                <div class="info_title">
                    <label>案場設備列表</label>
                    <div id="select_station_list">
                        <select id="station" class="select_option" v-model="input.S_Station_Name">
                            <option value="">案場地點</option>
                            <option :value="item" v-for="item in typeList.sort">{{item}}</option>
                        </select>
                        <select id="windmachine"  class="select_option" v-model="input.S_Station_Id">
                            <option value="">案場ID</option>
                            <option :value="item" v-for="item in titleList.sort">{{item}}</option>
                        </select>
                    </div>
                </div>
                <div class="facility_container">
                    <div class="facility_subcontent">
                        <div class="facility_subtitle" v-if="content">
                            <table id="facility_table">
                                <thead>
                                    <tr>
                                        <th>案場名稱</th>
                                        <th>設備編號</th>
                                        <th>創建時間</th>
                                        <th>狀態</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="item in facility_update">
                                        <td>竹南</td>
                                        <td>{{ item.S_Facility_Id }}</td>
                                        <td>{{ item.DT_Time }}</td>
                                        <td> 
                                            <div class="py-3py-3 d-flex justify-content-center">
                                                OFF
                                                <label class="switch">
                                                    <input type="checkbox" v-model="item.I_Status" @click="check_status(item)">
                                                    <span class="slider"></span>
                                                </label>
                                                ON
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
       </div>
   </template>
   <template id="setup_page">
       <div>
        <section class="navigation">
            <div class="banner">
                <div class="banner_icon">
                    <div class="logo_img">
                        <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                    </div>
                    <div class="logo_name">
                        <label>NTUST Renewable of Energy</label>
                    </div>
                </div>
                <input type="checkbox" id="menu_control">
                <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                <div class="nav_container">
                    <nav class="nav_header">
                        <ul class="nav-list">
                            <li>
                                <router-link to="/">首頁</router-link>
                            </li>
                        </ul>
                        <ul class="nav-list" @click="dropdown">
                            <li>
                                <a>案場列表</a>
                                <ul class="nav_dropdown">
                                    <li>
                                        <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a>設定</a>
                                <ul class="nav_dropdown">
                                    <li>
                                        <a><router-link to="/profile_page">使用者設定</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/setup_page">上下限設定</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a>管理平台</a>
                                <ul class="nav_dropdown">
                                    <li>
                                        <a><router-link to="/monitor">案場監控</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="monitor/report">報表</router-link></a>
                                    </li>
                                    <li>
                                        <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        
                    
                      </nav>  
                </div>
                <div class="address_card_icon">
                    <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                </div>
            </div>
        </section>
        <div id="pop_profile" style="visibility: hidden;">
            <div class="user_icon">
                <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
            </div>
            <div class="user_data">
                Username:<br><br>{{cname}}<br>
                
            </div>
            <div class="logout">
                <button id="logoutbtn" @click="logout_evt()">Log out</button>
            </div>
        </div>
        <div class="modal_change"role="dialog" data-backdrop="static" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal_dialog" >
                <div class="modal_content">
                    <div class="modal_header">
                        <div class="modal-title">
                          <span>燈號規則更改</span>
                          <!-- <button type="button" class="close_white" data-dismiss="modal" aria-hidden="true">×</button> -->
                        </div>
                        
                    </div>
                    <div class="modal-body">
                        <div class="set_select_context">
                            <label class="select_detail">案場地點: </label>
                            <div class="station_name" v-if="context">
                                
                            </div>{{ input.S_Station_Name }}
                        </div><br>
                        <div class="set_select_context">
                            <label class="select_detail">風機編號: </label>
                            <div class="station_id">
                                {{input.S_Station_Id}}
                            </div>
                        </div>
                        <div class="select_choose">
                            <select id="station" class="select_option" v-model="input.S_Station_Name">
                                <option :value="null">選擇案場</option>
                                <option :value="item" v-for="item in typeList.sort">{{item}}</option>
                            </select>
                            <select id="stationID"  class="select_option" v-model="input.S_Station_Id">
                                <option :value="null">案場編號</option>
                                <option :value="item" v-for="item in titleList.sort">{{item}}</option>
                            </select>
                             <select id="windmachine"  class="select_option" v-model="input.S_Facility_Id">
                                <option :value="null">選擇風機</option> 
                                <option :value="item" v-for="item in titleList.map">{{item}}</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="modal_footer">
                        <button type="button" id="station_apply_btn"  @click="save_row" >Save</button>
    
                    </div>
                </div>
                
            </div>
        </div>
        <div class="table_container_setting">
            <table class="table_setup">
                <thead>
                    <tr>
                        <th>規格名稱 </th>
                        <th>紅燈上限 </th>
                        <th>黃燈上限 </th>
                        <th>黃燈下限 </th>
                        <th>紅燈下限 </th>
                    </tr>
                </thead>
                <tbody v-for="item in set_value">
                    <tr>
                        <td>發電量 (kWh/s)</td>
                        <td><input v-model="item.F_Red_Power_U" class="form-control" type="number"  step="0.01"></td>
                        <td><input v-model="item.F_Yellow_Power_U" class="form-control" type="number" step="0.01"></td>
                        <td><input v-model="item.F_Yellow_Power_D"  class="form-control" type="number" step="0.01"></td>
                        <td><input v-model="item.F_Red_Power_D" class="form-control" type="number" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>模組溫度(度)</td>
                        <td><input v-model="item.F_Red_Temperature_U" class="form-control" type="number"></td>
                        <td><input v-model="item.F_Yellow_Temperature_U" class="form-control" type="number"></td>
                        <td><input v-model="item.F_Yellow_Temperature_D"  class="form-control" type="number"></td>
                        <td><input v-model="item.F_Red_Temperature_D" class="form-control" type="number"></td>
                    </tr>
                    <tr>
                        <td>模組風速(m/s)</td>
                        <td><input v-model="item.F_Red_Speed_U" class="form-control" type="number" step="0.1"></td>
                        <td><input v-model="item.F_Yellow_Speed_U" class="form-control" type="number" step="0.1"></td>
                        <td><input v-model="item.F_Yellow_Speed_D"  class="form-control" type="number" step="0.1"></td>
                        <td><input v-model="item.F_Red_Speed_D" class="form-control" type="number" step="0.1"></td>
                    </tr>
                    <tr>
                        <td>模組風向(度)</td>
                        <td><input v-model="item.F_Red_Direction_U" class="form-control" type="number"></td>
                        <td><input v-model="item.F_Yellow_Direction_U" class="form-control" type="number"></td>
                        <td><input v-model="item.F_Yellow_Direction_D"  class="form-control" type="number"></td>
                        <td><input v-model="item.F_Red_Direction_D" class="form-control" type="number"></td>
                    </tr>
                </tbody>
            </table>   
        </div>
        <div id="else_table" v-else>
             <span>Plase choose the option.</span> 
        </div>
       </div>
   </template>
   <template id="abnormal_management">
       <div>
            <section class="navigation">
                <div class="banner">
                    <div class="banner_icon">
                        <div class="logo_img">
                            <router-link to="/"><img src="./img/台科logo-02.png" id="ntust_logo"></router-link>
                        </div>
                        <div class="logo_name">
                            <label>NTUST Renewable of Energy</label>
                        </div>
                    </div>
                    <input type="checkbox" id="menu_control">
                    <div class="nav-mobile"><label id="nav-toggle"for="menu_control"><span></span></label></div>
                    <div class="nav_container">
                        <nav class="nav_header">
                            <ul class="nav-list">
                                <li>
                                    <router-link to="/">首頁</router-link>
                                </li>
                            </ul>
                            <ul class="nav-list" @click="dropdown">
                                <li>
                                    <a>案場列表</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/station_list">案場及設備資訊</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/station_apply_page">新增案場</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>設定</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/profile_page">使用者設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/setup_page">上下限設定</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/facility_status">設備狀態及更改</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a>管理平台</a>
                                    <ul class="nav_dropdown">
                                        <li>
                                            <a><router-link to="/monitor">案場監控</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="monitor/report">報表</router-link></a>
                                        </li>
                                        <li>
                                            <a><router-link to="/abnormal_management">異常管理</router-link></a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                            
                        
                        </nav>  
                    </div>
                    <div class="address_card_icon">
                        <i class="fas fa-address-card" id="icon" @click="pop_little_window()"></i>
                    </div>
                </div>
            </section>
            <div id="pop_profile" style="visibility: hidden;">
                <div class="user_icon">
                    <router-link to="/profile_page"><i class="fas fa-user-circle"></i></router-link>
                </div>
                <div class="user_data">
                    Username:<br><br>{{cname}}<br>
                    
                </div>
                <div class="logout">
                    <button id="logoutbtn" @click="logout_evt()">Log out</button>
                </div>
            </div>
            <div class="abnormal_header">
                <div id="abnormal_title">
                    <h1>異常管理</h1>
                </div>
                <div id="abnormal_station_list">
                    <select id="station" class="select_option" v-model="input.S_Station_Name">
                        <option :value="null">選擇案場</option>
                        <option v-for="item in typeList.sort">{{item}}</option>
                    </select>
                    <select id="stationID"  class="select_option" v-model="input.S_Station_Id">
                        <option :value="null">案場編號</option>
                        <option v-for="item in titleList.sort">{{item}}</option>
                    </select>
                     <select id="windmachine"  class="select_option" v-model="input.S_Facility_Id">
                        <option :value="null">選擇風機</option> 
                        <option v-for="item in titleList.machine">{{item}}</option>
                    </select>
                </div>
            </div>
            <div id="repairDoneWindow" style="visibility: hidden;">
                <div class="info_title">
                    <label>維修完成申請#{{ cart.I_Index }}</label>
                </div>
                <div id="repair_subcontain" >
                    <div class="repair_subtitle">
                        <div class="error_reason">
                            <label>設備編號</label>
                            <div class="repair_info">
                                {{ cart.S_Facility_Id}}
                            </div>
                            <label>異常描述</label>
                            <div class="repair_info">
                                {{ cart.S_Error_Description}}
                            </div>
                            <label>異常原因</label>
                            <div class="repair_info">
                                <input class="fill_in" v-model="S_Error_Reason">
                            </div>
                        </div>
                        <div class="repair_apply">
                            <label>工程師</label>
                            <div class="repair_info">
                                <input class="fill_in" placeholder="xxx" v-model="S_Repairer">
                            </div>
                            <label>維修時間</label>
                            <div class="repair_info">
                                <input type="date" class="fill_in" v-model="DT_Repair">
                            </div>
                            <label>更換材料</label>
                            <div class="repair_info">
                                <input class="fill_in" v-model="S_Error_Material">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="repair_footer">
                    <button id="repair_cacel" @click="cacel_btn">取消</button>
                    <button id="repair_done"@click="enter_btn">確認</button>
                </div>
            </div>
            <div class="abnornal_content">
                <div class="repair_container">
                    <ul class="repair_tabs">
                        <li class="repair_active active" @click="repairring" rel="tab1">待維修</li>
                        <li rel="tab2" @click="recode">已維修</li>
                    </ul>
                    <div class="tab_container">
                        <h3 class="d_active tab_drawer_heading" rel="tab1">Tab 1</h3>
                        <div id="tab1" class="tab_content">
                            <table class="table_repair">
                                <thead>
                                    <tr>
                                        <th>時間</th>
                                        <th>案場編號</th>
                                        <th>閘道編號</th>
                                        <th>告警訊息</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(item, I_Index) in error_announce">
                                        <td>{{ item.DT_Error}}</td>
                                        <td>{{ item.S_Station_Id}}</td>
                                        <td>{{ item.S_Gateway_Id}}</td>
                                        <td>{{ item.S_Error_Code}}</td>
                                        <td><button id="repair_apply" @click="repair_done(item)">維修</button></td>
                                    </tr>
                                </tbody>
                            </table>   
                        </div>
                            <!-- #tab1 -->
                        <h3 class="tab_drawer_heading" rel="tab2">Tab 2</h3>
                        <div id="tab2" class="tab_content">
                            <table class="table_repair">
                                <thead>
                                    <tr>
                                        <th>案場編號</th>
                                        <th>損壞原因</th>
                                        <th>更換設備</th>
                                        <th>工程師</th>
                                        <th>維修時間</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="recode in error_recode">
                                        <td>{{ recode.S_Station_Id }}</td>
                                        <td>{{ recode.S_Error_Reason }}</td>
                                        <td>{{ recode.S_Error_Material }}</td>
                                        <td>{{ recode.S_Repairer }}</td>
                                        <td>{{ recode.DT_Repair }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- #tab2 -->
                    </div>
                </div>
                <div class="map_container">
                    <div id="stationMap"></div>
                </div>
            </div>
            
            
       </div>
   </template>
    <!-- jquery -->
    <script src="./module/jquery-3.5.1.min.js"></script>
    <script src="./module/jquery.table2excel.js"></script>
    <!-- vue -->
    <script src="./module/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js"></script>
    <!-- router2 寫法跟router1不同 -->
    <script src="./module/vue-router.js"></script>
    <!-- birth_format -->
    <script src="./module/moment.min.js"></script>
    <!-- chart -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
    <!-- map -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="./script.js"></script>
    <script src="./map.js"></script>
    
</html>